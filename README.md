# SDS Gen AI Text To SQL

## Running Scripts

To setup IRIS and the LLM Layer, please run setup.sh

Next, change password to test when launching IRIS 

To run the test, please run testing.sh 

To stop everything, please run cleanup.sh 

Link to IRIS: 
http://localhost:42773/csp/sys/UtilHome.csp


## What we have so far

### IRIS Layer
The IRIS Layer files is in iris_base. It contains the up to date docker-compose.yml and the old setup and cleanup bash scripts 

In iris_base/data we have our data.csv
In src/SDS/ we have our DataModels. 

Internal connection: http://irisData:1972
External connection: http://localhost:2000

### LLM_layer
The LLM Layer files is in LLM_layer. For each model we have a seperate folder and within each folder we have a Dockerfile and a second folder with all the necessary python and jar files. 

As of now, only LC_Chain is working and this uses SQLDataBaseChain. The most up to date python file is DBChainUpdated and this uses the up-to-date method of generating a SQL code and then using JDBC to retrieve data. SQLDataBase uses a SQLEngine to retrieve the data which is dependent on sqlalchemy-iris which has some issues when translating SQL Code generated by LangChain. The file test.py is included just to test our connection and doesn't need to be run. 

Internal connection: http://dbchain:12344
External connection: http://localhost:12344

### Pytest
This contains the pytest python files and Dockerfile. It also contains and older version of the testing bash script. 

### Exploration / Import

These are just temporary files and need to be cleaned up. 

## TODO
* Setup parameters.cfg to work with the Dockerfiles
* Ensure docker-compose.yml is outside iris_base
* Error handling for PyTest -> we should accept error in SQL Code as result in PyTest
* Get pytest to output junit.xml files 
* Get enough unit tests and variety of them
* Get a second table that we can test joins on 
* Finetune prompt parameterization 
* More Models!!!